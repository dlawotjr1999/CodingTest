#include <bits/stdc++.h>

int N, M;
int answer;

int field[501][501];

std::vector<std::array<std::pair<int, int>, 4>> shapes = {
	// I
	{{{0,0},{0,1},{0,2},{0,3}}},
	{{{0,0},{1,0},{2,0},{3,0}}},

	// O
	{{{0,0},{0,1},{1,0},{1,1}}},

	// T
	{{{0,0},{0,1},{0,2},{1,1}}},
	{{{0,1},{1,0},{1,1},{1,2}}},
	{{{0,1},{1,1},{2,1},{1,0}}},
	{{{0,0},{1,0},{2,0},{1,1}}},

	// S
	{{{0,0},{0,1},{1,1},{1,2}}},
	{{{1,0},{0,1},{1,1},{0,2}}},
	{{{0,0},{1,0},{1,1},{2,1}}},
	{{{0,1},{1,1},{1,0},{2,0}}},

	// L
	{{{0,0},{1,0},{2,0},{2,1}}},
	{{{0,1},{1,1},{2,1},{2,0}}},
	{{{0,0},{0,1},{0,2},{1,0}}},
	{{{0,0},{0,1},{0,2},{1,2}}},
	{{{0,0},{1,0},{1,1},{1,2}}},
	{{{0,2},{1,0},{1,1},{1,2}}},
	{{{0,0},{1,0},{2,0},{0,1}}},
	{{{0,1},{1,1},{2,1},{0,0}}},
};

int main() {
	std::cin >> N >> M;

	for (int i = 0; i < N; ++i) {
		for (int j = 0; j < M; ++j) {
			std::cin >> field[i][j];
		}
	}

	for (int i = 0; i < N; ++i) {
		for (int j = 0; j < M; ++j) {
			for (auto& shape : shapes) {
				int cur = 0;
				bool isOk = true;

				for (auto [x, y] : shape) {
					int dx = j + x, dy = i + y;

					if (dx < 0 || dx >= M || dy < 0 || dy >= N) {
						isOk = false;
						break;
					}

					cur += field[dy][dx];
				}

				if (isOk)
					answer = std::max(answer, cur);
			}
		}
	}

	std::cout << answer;
	return 0;
}